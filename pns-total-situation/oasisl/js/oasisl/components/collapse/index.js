define(["oasisUf","transition"],function(e){"use strict";$.oasUiFactory("oasCollapse",{VERSION:"1.0.0",options:{relative:"",toggle:!1,parent:"",transitionDuration:350},_create:function(){var e=this.options,t=e.relative,n=e.parent,r=this;if(!t)return;this.$el.attr("data-oasCollapse-relative",t),this.$trigger=$("[data-oasCollapse-name="+t+"]"),n&&this.$trigger.attr("data-parent",n),this.transitioning=null,n?this.$parent=this._getParent():this._addAriaAndCollapsedClass(this.$el,this.$trigger),this.$trigger.on("click."+this.uiName,this.$trigger,function(e){var t=!1,n;r.brotherList=r.$parent&&r.$parent.find(".in, .collapsing"),r.brotherList&&$.each(r.brotherList,function(e,r){n=$(this).data("oasCollapse").transitioning,n==1&&(t=!0)});if(t)return;return r._toggle(),!1}),this.options.toggle&&this._toggle();var i=this.options.transitionDuration/1e3;i&&this.$el.css({"transition-duration":i+"s","-webkit-transition-duration":i+"s"})},_toggle:function(){this[this.$el.hasClass("in")?"_hide":"_show"]()},_dimension:function(){var e=this.$el.hasClass("width");return e?"width":"height"},_show:function(){if(this.transitioning||this.$el.hasClass("in"))return;var e,t=this.$parent&&this.$parent.find(".in, .collapsing");if(t&&t.length&&this.transitioning)return;this._emit("show",[this.$el]),t&&t.length&&t.each(function(){$(this).oasCollapse("hide")});var n=this._dimension();this.$el.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$el.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this._emit("shown",[this.$el])};if(!$.support.transition)return r.call(this);var i=$.camelCase(["scroll",n].join("-"));this.$el.one("bsTransitionEnd",$.proxy(r,this)).emulateTransitionEnd(this.options.transitionDuration)[n](this.$el[0][i])},_hide:function(){if(this.transitioning||!this.$el.hasClass("in"))return;this._emit("hide",[this.$el]);var e=this._dimension();this.$el[e](this.$el[e]())[0].offsetHeight,this.$el.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var t=function(){this.transitioning=0,this.$el.removeClass("collapsing").addClass("collapse"),this._emit("hidden",[this.$el])};if(!$.support.transition)return t.call(this);this.$el[e](0).one("bsTransitionEnd",$.proxy(t,this)).emulateTransitionEnd(this.options.transitionDuration)},_getParent:function(){var e=this;return $(this.options.parent).find('[data-oasCollapse-name][data-parent="'+this.options.parent+'"]').each($.proxy(function(t,n){var r=$(n);this._addAriaAndCollapsedClass(e._getTargetFromTrigger(r),r)},this)).end()},_getTargetFromTrigger:function(e){var t=e.attr("data-oasCollapse-name");return $("[data-oasCollapse-relative="+t+"]")},_addAriaAndCollapsedClass:function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)},invoke:{toggle:function(){this._toggle()},show:function(){this._show()},hide:function(){this._hide()}}}),$("[oasCollapse]").oasCollapse({})});