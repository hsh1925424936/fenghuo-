define(["oasisUf"],function(){"use strict";$.oasUiFactory("oasSticky",{options:{topSpacing:0,bottomSpacing:0,className:"oas-issticky",wrapperClassName:"oas-sticky-wrapper",center:!1,getWidthFrom:"",responsiveWidth:!1,bottomfixed:!1,stoptionsp:null,fixedContainer:window,fixedDocument:document,fixedWidth:!1},_create:function(){var e=this.$el,t=this.options,n=this;this.oasSticked=[],this.$fixed_container=$(t.fixedContainer),this.$fixed_document=$(t.fixedDocument),this.windowHeight=this.$fixed_container.actual("outerHeight");var r=e.attr("id"),i=r?r+"-"+t.wrapperClassName:t.wrapperClassName,s=$("<div></div>").attr("id",r+"-sticky-wrapper").addClass(t.wrapperClassName);e.addClass("oas-sticky").wrapAll(s),t.center&&e.parent().css({width:e.actual("outerWidth"),marginLeft:"auto",marginRight:"auto"}),e.css("float")=="right"&&e.css({"float":"none"}).parent().css({"float":"right"});var o=e.parent();o.css("height",e.actual("outerHeight")),this.oasSticked.push({topSpacing:t.topSpacing,bottomSpacing:t.bottomSpacing,stickyElement:e,currentTop:null,stickyWrapper:o,className:t.className,getWidthFrom:t.getWidthFrom,responsiveWidth:t.responsiveWidth,stoptionsp:t.stoptionsp,bottomfixed:t.bottomfixed,that:this,fixedWidth:t.fixedWidth}),this.athchEvent(),n.scroller()},athchEvent:function(){var e=this.$fixed_container.actual("outerWidth"),t=this.$fixed_container.actual("outerHeight"),n,r=this;this.$fixed_container.on("scroll",function(){r.scroller()}),$(window).on("resize",function(){n&&clearTimeout(n),n=setTimeout(function(){var n=r.$fixed_container.actual("outerWidth"),i=r.$fixed_container.actual("outerHeight");if(n!==e||i!==t)r.resizer(),e=r.$fixed_container.actual("outerWidth"),t=r.$fixed_container.actual("outerHeight")},80)})},scroller:function(){var e=this.$fixed_container,t=e.scrollTop(),n=this.$fixed_document.actual("outerHeight"),r=n-this.windowHeight,i=t>r?r-t:0;for(var s=0;s<this.oasSticked.length;s++){var o=this.oasSticked[s],u=e.is($(window))?0:e.offset().top,a=o.stickyWrapper.offset().top-u;a=o.bottomfixed?a+o.stickyWrapper.actual("outerHeight"):a;var f=a-o.topSpacing-i,l=e.is($(window))?t<=f:f>0;if(l)o.currentTop!==null&&(o.stickyElement.css("position","").css("top",""),o.stickyElement.parent().removeClass(o.className),o.that._emit("unFixed",[o.that.$el]),o.currentTop=null);else{var c=n-o.stickyElement.actual("outerHeight")-o.topSpacing-o.bottomSpacing-t-i;c<0?c=c+o.topSpacing+u:c=o.topSpacing+u,typeof o.getWidthFrom!="undefined"&&o.getWidthFrom!==""?o.stickyElement.css("width",$(o.getWidthFrom).actual("outerWidth")):o.stickyElement.css("width",$(o.stickyElement).actual("outerWidth")),o.currentTop!=c&&(o.stickyElement.css("position","fixed").css("top",c),o.stickyElement.parent().addClass(o.className),o.that._emit("onFixed",[o.that.$el]),o.currentTop=c)}o.stoptionsp&&o.stoptionsp<t&&(o.stickyElement.css("position","").css("top",""),o.stickyElement.parent().removeClass(o.className),o.that._emit("unFixed",[o.that.$el]),o.currentTop=null)}},resizer:function(){for(var e=0;e<this.oasSticked.length;e++){var t=this.oasSticked[e];typeof t.getWidthFrom!="undefined"&&t.responsiveWidth===!0?t.stickyElement.css("width",$(t.getWidthFrom).actual("outerWidth")):t.stickyElement.actual("outerWidth",{clone:!0})===0&&t.stickyElement.actual("outerWidth")!==0?(t.stickyElement.css("width","100%"),trueWidth=t.stickyElement.actual("outerWidth")-t.stickyElement.css("margin-left").slice(0,-2)-t.stickyElement.css("margin-right").slice(0,-2),t.stickyElement.outerWidth(trueWidth)):t.fixedWidth||t.stickyElement.css("width",t.stickyElement.parent().actual("outerWidth"))}},invoke:{unstick:function(){var e=this.$el,t=-1;for(var n=0;n<this.oasSticked.length;n++)this.oasSticked[n].stickyElement.get(0)==e.get(0)&&(t=n);t!=-1&&(this.oasSticked.splice(t,1),e.unwrap(),e.removeClass("oas-sticky").removeAttr("style"))},stoptionsp:function(e){this.options.stoptionsp=e;for(var t=0,n=this.oasSticked.length;t<n;t++)if(this.oasSticked[t].that===this){this.oasSticked[t].stoptionsp=e;break}}}}),$.fn.extend({actual:function(e,t){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var n={absolute:!1,clone:!1,includeMargin:!1},r=$.extend(n,t),i=this.eq(0),s,o;if(r.clone===!0)s=function(){var e="position: absolute !important; top: -1000 !important; ";i=i.clone().attr("style",e).appendTo("body")},o=function(){i.remove()};else{var u=[],a="",f;s=function(){f=i.parents().addBack().filter(":hidden"),a+="visibility: hidden !important; display: block !important; left: -9999px; top:-9999px;",r.absolute===!0&&(a+="position: absolute !important; "),f.each(function(){var e=$(this),t=e.attr("style");u.push(t),e.attr("style",t?t+";"+a:a)})},o=function(){f.each(function(e){var t=$(this),n=u[e];n===undefined?t.removeAttr("style"):t.attr("style",n)})}}s();var l=/(outer)/.test(e)?i[e](r.includeMargin):i[e]();return o(),l}}),$.fn.addBack=$.fn.addBack||$.fn.andSelf,$("[oassticky]").oasSticky({})});