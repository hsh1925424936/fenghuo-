define(["lodash","oasisUf"],function(e){"use strict";var t=[];$.oasUiFactory("oasDropdown",{VERSION:"1.0.0",options:{trigger:"hover focus",miss:!0,container:null,randomClass:""},_create:function(){var e=this.options,n=e.miss,r=this,i=this.$el.parent().find(".dropdown-menu"),s=e.trigger;if(this.options.container){var o=i.clone();i.remove(),$(this.options.container).append(o),i=o,this.$menu=i,this.$menu.css("right","initial"),this.$menu.addClass(this.options.randomClass)}this.$el.on("click."+this.uiName,this.$el,$.proxy(this._toggle,this)),n||i.on("click."+this.uiName,i,$.proxy(this._close,this)),t.push(this.$el)},_setPosition:function(){if(this.options.container){var e=$(this.options.container).offset(),t=this.$el.offset(),n={};n.top=t.top-e.top+this.$el.outerHeight(),n.left=t.left-e.left,this.$menu.width(this.$el.outerWidth()-2),this.$menu.css(n)}},_toggle:function(e){var t=this.$el,n=t.parent();n.hasClass("open")?this._close():this._open()},_close:function(){var e=this.$el,t=e.parent();t.hasClass("open")&&(this._emit("hide",[this.$el]),t.removeClass("open"),this.options.container&&this.$menu.hide(),this._emit("hidden",[this.$el]))},_open:function(){var e=this.$el,t=e.parent();if(e.attr("disabled")==="disabled")return;t.hasClass("open")||(this._emit("show",[this.$el]),t.addClass("open"),this.options.container&&(this.$menu.show(),this._setPosition()),this._emit("shown",[this.$el]))},invoke:{open:function(){this._open()},close:function(){this._close()},destroy:function(){this.$el.unbind("."+this.uiName).removeData(this.uiName);for(var e=0,n=t.length;e<n;e++)t[e]===this.$el&&(t.splice(e,1),this.options.container&&this.$menu.remove())}}}),$(document).on("click.oasDropdown",function(n){var r=$(n.target),i=[];e.map(t,function(e){r.closest(".dropdown")[0]!==e.closest(".dropdown")[0]&&i.push(e)}),e.map(i,function(e){e.data("oasDropdown")&&e.oasDropdown("close")})}),$('[data-toggle="oasDropdown"]').oasDropdown({})});