define(["jquery"],function(){$.oasUiFactory=function(e,t){var n=e;$.expr[":"][e]=function(t){return!!$.data(t,e)},$.oasis=$.oasis||{},$.oasis[e]=function(e,t){arguments.length&&this._createOasUi(e,t)};var r=new $.OasUiFactory;r.options=$.extend(!0,{},r.options),$.oasis[e].prototype=$.extend(!0,r,{namespace:"oasis",uiName:n,widgetBaseClass:e},t),$.oasUiFactory.bridge(e,$.oasis[e])},$.oasUiFactory.bridge=function(e,t){$.fn[e]=function(n,r){var i=arguments[0],s=typeof i=="string",o=[].slice.call(arguments,1),u=$(this);return s?this.each(function(){var t=$.data(this,e);if(!t)throw Error(e+"还没有被初始化");if(t.invoke[i]){var n=t.invoke[i].apply(t,o);if(n!==t&&n!==undefined)return u=n,!1}else console.warn(i+"---方法不存在"),console.info(e+" 组件你可以调用以下方法"),console.table?console.table(t.invoke):console.info(t.invoke)}):this.each(function(){var r=$.data(this,e);r||$.data(this,e,new t(n,this))}),u}},$.OasUiFactory=function(e,t){arguments.length&&this._createOasUi(e,t)},$.OasUiFactory.prototype={_createOasUi:function(e,t){this.$el=$(t),this.DEFAULTS=$.extend(!0,{},this.options);var e=this.options=$.extend(!0,{},this.options,this._getElementOptions(),e);this.onCreate=e.onCreate,this.__isCreated__=!1,this._template&&(this.tpl=this._template());var n=this._create();this.__isCreated__=!0,this.onCreate&&this.onCreate.call(this);if(n===!1)return!1;this._bindUiEvents(),this.invoke=$.extend(!0,{show:function(){this.$el.show()},hide:function(){this.$el.hide()},destroy:function(){this.$el.unbind("."+this.uiName).removeData(this.uiName)},option:function(e){if(typeof e=="string")return this.options[e]},getDefaults:function(){return this.DEFAULTS}},this.invoke)},_getElementOptions:function(){var e=this.$el.data(),t=new RegExp("^"+this.uiName,"i"),n={},r;for(var i in e)t.test(i)&&(r=i.replace(t,""),r=r.charAt(0).toLowerCase()+r.substr(1),n[r]=e[i]);return n},_create:function(){},_bindUiEvents:function(){var e=this.$el,t=this,n,r,i,s,o=/(\S+)\s(.+)/,u=e;if(this.events){"target"in this.events&&(u=_.isFunction(this.events.target)?this.events.target.call(this):this.events.target);for(var a in this.events){if(a==="target")continue;i=a.match(o),n=i[2],_eventsType=i[1],s=null,$.isFunction(this.events[a])?s=this.events[a]:s=this[this.events[a]],function(e){u.on(_eventsType+"."+t.uiName,n,function(n){if(e.call(t,this,n)===!1)return!1})}(s)}i=null,n=null,_eventsType=null,s=null}},_iCall:function(e,t){var n=t?this.invoke[e].apply(this,t):this.invoke[e].apply(this);return n},_emit:function(e,t){this.$el.trigger(e+"."+this.uiName,t)}}});